import{d as e,J as l,c as a,b as s,w as t,i as c,e as o,f as d,j as u,k as n,l as i,m as r,B as f,n as m,F as _,p,x as g,t as h,Y as b,K as x,L as y,v as k,Z as C,I as v,X as V,G as B,N as z,O as P,P as N,z as q}from"./index-8WK0Ux_r.js";import{_ as w,a as A}from"./icon.CNXA9uzs.js";const j=A(e({options:{styleIsolation:"shared"},__name:"voice-form",setup(e){const A=["诉求","建议","咨询"],j=["阳光水岸 1号楼","阳光水岸 2号楼","阳光水岸 3号楼"],F=l({type:"诉求",community:"",images:[],description:"",contactName:"",contactPhone:"",agreed:!1}),I=a(()=>F.type&&F.community&&F.contactName&&11===F.contactPhone.length&&F.agreed),U=()=>{B()},T=e=>{const l=e.detail.value;F.community=j[l]||""},D=()=>{z({count:8-F.images.length,success:e=>{F.images=[...F.images,...e.tempFilePaths]}})},E=()=>{I.value&&(P({title:"提交中..."}),setTimeout(()=>{N(),q({title:"提交成功",icon:"success",duration:2e3,success:()=>{setTimeout(()=>{B()},2e3)}})},1500))};return(e,l)=>{const a=o(d("t-icon"),w),B=c,z=i,P=b,N=x,q=C,G=v,H=V,J=f;return u(),s(B,{class:"page-container"},{default:t(()=>[n(B,{class:"custom-header"},{default:t(()=>[n(B,{class:"back-btn",onClick:U},{default:t(()=>[n(a,{name:"chevron-left",size:"48rpx",color:"#333"})]),_:1}),n(z,{class:"header-title"},{default:t(()=>[r("发布诉求")]),_:1}),n(B,{class:"placeholder"})]),_:1}),n(J,{"scroll-y":"",class:"form-content"},{default:t(()=>[n(B,{class:"form-wrapper"},{default:t(()=>[n(B,{class:"form-section"},{default:t(()=>[n(B,{class:"section-title"},{default:t(()=>[n(B,{class:"title-bar"}),n(z,null,{default:t(()=>[r("建议类型")]),_:1}),n(z,{class:"required"},{default:t(()=>[r("*")]),_:1})]),_:1}),n(B,{class:"type-selector"},{default:t(()=>[(u(),m(_,null,p(A,e=>n(B,{key:e,class:g(["type-item",{active:F.type===e}]),onClick:l=>F.type=e},{default:t(()=>[r(h(e),1)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1}),n(B,{class:"form-section"},{default:t(()=>[n(B,{class:"section-title"},{default:t(()=>[n(B,{class:"title-bar"}),n(z,null,{default:t(()=>[r("所属小区")]),_:1}),n(z,{class:"required"},{default:t(()=>[r("*")]),_:1})]),_:1}),n(P,{range:j,onChange:T},{default:t(()=>[n(B,{class:"picker-box"},{default:t(()=>[n(z,{class:g({"placeholder-text":!F.community})},{default:t(()=>[r(h(F.community||"请选择所属小区"),1)]),_:1},8,["class"]),n(a,{name:"chevron-down",size:"32rpx",color:"#94A3B8"})]),_:1})]),_:1})]),_:1}),n(B,{class:"form-section"},{default:t(()=>[n(B,{class:"section-title"},{default:t(()=>[n(B,{class:"title-bar"}),n(z,null,{default:t(()=>[r("上传相关材料")]),_:1})]),_:1}),n(B,{class:"upload-container"},{default:t(()=>[n(B,{class:"upload-grid"},{default:t(()=>[(u(!0),m(_,null,p(F.images,(e,l)=>(u(),s(B,{key:l,class:"upload-item"},{default:t(()=>[n(N,{src:e,mode:"aspectFill"},null,8,["src"]),n(B,{class:"delete-btn",onClick:y(e=>(e=>{F.images.splice(e,1)})(l),["stop"])},{default:t(()=>[n(a,{name:"close",size:"24rpx",color:"#fff"})]),_:2},1032,["onClick"])]),_:2},1024))),128)),F.images.length<8?(u(),s(B,{key:0,class:"upload-btn",onClick:D},{default:t(()=>[n(a,{name:"add",size:"64rpx",color:"#CBD5E1"})]),_:1})):k("",!0)]),_:1}),n(B,{class:"upload-tips"},{default:t(()=>[r(" 提示：限制照片数量不超过8张，单张照片大小不超过5MB。建议上传2张以上照片，能反映周边环境，以便工作人员快速确定位置。 ")]),_:1})]),_:1})]),_:1}),n(B,{class:"form-section"},{default:t(()=>[n(B,{class:"section-title space-between"},{default:t(()=>[n(B,{class:"title-left"},{default:t(()=>[n(B,{class:"title-bar"}),n(z,null,{default:t(()=>[r("内容描述")]),_:1})]),_:1}),n(B,{class:"input-mode-toggle"},{default:t(()=>[n(B,{class:"toggle-bg"},{default:t(()=>[n(z,{class:"toggle-text"},{default:t(()=>[r("文字")]),_:1}),n(B,{class:"toggle-slider"})]),_:1})]),_:1})]),_:1}),n(B,{class:"textarea-box"},{default:t(()=>[n(q,{modelValue:F.description,"onUpdate:modelValue":l[0]||(l[0]=e=>F.description=e),placeholder:"提示：详细准确的描述问题有助于加快处置速度。","placeholder-style":"color: #94A3B8",maxlength:"500"},null,8,["modelValue"])]),_:1})]),_:1}),n(B,{class:"form-section"},{default:t(()=>[n(B,{class:"section-title"},{default:t(()=>[n(B,{class:"title-bar"}),n(z,null,{default:t(()=>[r("联系人")]),_:1}),n(z,{class:"required"},{default:t(()=>[r("*")]),_:1})]),_:1}),n(B,{class:"input-box"},{default:t(()=>[n(G,{type:"text",modelValue:F.contactName,"onUpdate:modelValue":l[1]||(l[1]=e=>F.contactName=e),placeholder:"请输入您的名字","placeholder-style":"color: #94A3B8"},null,8,["modelValue"])]),_:1})]),_:1}),n(B,{class:"form-section"},{default:t(()=>[n(B,{class:"section-title"},{default:t(()=>[n(B,{class:"title-bar"}),n(z,null,{default:t(()=>[r("联系人手机")]),_:1}),n(z,{class:"required"},{default:t(()=>[r("*")]),_:1})]),_:1}),n(B,{class:"input-box"},{default:t(()=>[n(G,{type:"number",modelValue:F.contactPhone,"onUpdate:modelValue":l[2]||(l[2]=e=>F.contactPhone=e),placeholder:"请输入您的手机号","placeholder-style":"color: #94A3B8",maxlength:"11"},null,8,["modelValue"])]),_:1})]),_:1}),n(B,{class:"agreement-section"},{default:t(()=>[n(B,{class:"checkbox-box",onClick:l[3]||(l[3]=e=>F.agreed=!F.agreed)},{default:t(()=>[n(B,{class:g(["custom-checkbox",{checked:F.agreed}])},{default:t(()=>[F.agreed?(u(),s(a,{key:0,name:"check",size:"24rpx",color:"#fff"})):k("",!0)]),_:1},8,["class"]),n(z,{class:"agreement-text"},{default:t(()=>[r(" 我确认所反映的问题客观、真实，且严格遵守国家有关的法律法规及其他相关规定。 ")]),_:1})]),_:1})]),_:1}),n(B,{class:"submit-section"},{default:t(()=>[n(H,{class:"submit-btn",disabled:!I.value,onClick:E},{default:t(()=>[r(" 提交 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-61b00df5"]]);export{j as default};
