import{d as e,r as a,c as l,a as t,E as s,b as i,w as c,i as o,e as u,f as n,j as d,k as r,B as f,x as m,l as v,m as p,t as _,v as y,n as g,F as h,p as k,K as b,G as C,T as x,O as z,P as T,z as B,U as F,V as j}from"./index-PUK5Iwtz.js";import{_ as w,a as R}from"./icon.CJOHyHK1.js";import{_ as A}from"./navbar.COTAEQY7.js";import{_ as M}from"./button.GJ5z5xt4.js";import{c as E}from"./config.BxfTPpYJ.js";import"./loading.NVpDzvTL.js";const G=R(e({__name:"message-detail",setup(e){const R=a(null),G=a(null);l(()=>R.value?R.value.category+"详情":"消息详情");const I=l(()=>R.value?"vote"===R.value.type?R.value.isClosed?{text:"已结束",class:"closed"}:{text:"进行中",class:"active"}:"repair"===R.value.type?{text:"处理中",class:"processing"}:{text:"公示中",class:"notice"}:{text:"",class:""}),N=[{label:"支持调整",count:98},{label:"维持现状",count:45},{label:"弃权",count:13}],S=[{title:"维保人员已出发",time:"09:45",desc:"维保人员张师傅已接单，预计10:15到达现场。"},{title:"物业已受理",time:"09:15",desc:"您的报修申请已通过审核，正在指派维修人员。"},{title:"报修提交成功",time:"09:00",desc:"报修单号：BX20260209001，请耐心等待。"}],H=()=>{s().length>1?C():x({url:"/pages/mine/message"})},K=()=>{z({title:"提交中"}),setTimeout(()=>{T(),B({title:"投票成功",icon:"success"}),R.value&&(R.value.isClosed=!0)},1e3)},O=()=>{F({phoneNumber:"0797-8386110"})},P=()=>{uni.showShareMenu({withShareTicket:!0})};return t(()=>{const e=s(),a=(e[e.length-1].options||{}).type||"vote",l={vote:{id:"1",title:"关于2026年物业费调整的投票邀请",desc:"为了进一步提升物业服务质量，拟对现行物业费标准进行小幅调整，主要用于增加社区监控覆盖面及更换公共区域老化健身器材。",time:"10:30",fullTime:"2026-02-09 10:30",category:"电子投票",categoryCode:"voting",icon:"bulletpoint",isRead:!0,type:"vote",publisher:"赣州金牌物业管理中心",isClosed:!1},repair:{id:"2",title:"您的报修单已受理",desc:"3号楼2单元电梯故障报修已由维保人员受理，预计1小时内到达。",time:"09:15",fullTime:"2024-03-19 09:15",category:"小区报修",categoryCode:"repair",icon:"tools",isRead:!0,type:"repair",publisher:"报修中心",images:[E.placeholderImage]},notice:{id:"3",title:"3月社区环境整治公告",desc:"本周末将进行全区消杀和绿化修整，请各位业主关好门窗。",content:"尊敬的业主：\n\n为了给各位邻居营造一个更加整洁、优美的居住环境，物业公司计划于本周六、周日（3月23日-24日）对小区公共区域进行全面的消杀及绿化修剪工作。具体安排如下：\n\n1. 消杀范围：各单元大堂、电梯间、楼道及地下车库。\n2. 绿化修剪：中庭景观区、1-5号楼宅间绿地。\n\n注意事项：\n- 消杀期间请关好门窗，尽量减少在室外逗留。\n- 修剪树木期间请勿在作业区域下方停车，以免掉落枝条损伤车辆。\n\n感谢您的配合！",time:"昨天",fullTime:"2024-03-18 15:00",category:"公示公告",categoryCode:"notice",icon:"notification",isRead:!0,type:"notice",publisher:"龙湖物业",attachments:[{name:"消杀作业安全须知.pdf",size:"1.2MB"}]},voice:{id:"4",title:"投诉受理反馈",desc:"关于“高空抛物”的投诉建议已收到，我们已加强巡逻和监控。",time:"03-18",fullTime:"2024-03-18 09:00",category:"投诉建议",categoryCode:"complaint",icon:"chat",isRead:!0,type:"voice",publisher:"客服中心"}};R.value=l[a]||l.vote}),(e,a)=>{const l=u(n("t-icon"),w),t=u(n("t-navbar"),A),s=o,C=v,x=b,F=f,E=u(n("t-button"),M);return d(),i(s,{class:"page-container"},{default:c(()=>[r(t,{title:"消息详情","left-arrow":"",onGoBack:H,fixed:!1,class:"custom-navbar"},{"left-icon":c(()=>[r(l,{name:"chevron-left",size:"48rpx",color:"#1E293B"})]),_:1}),r(s,{class:"header-bg"}),r(F,{"scroll-y":"",class:"detail-scroll"},{default:c(()=>[R.value?(d(),i(s,{key:0,class:"content-wrapper"},{default:c(()=>[r(s,{class:"detail-header-info"},{default:c(()=>[r(s,{class:m(["type-tag",R.value.categoryCode])},{default:c(()=>[r(l,{name:R.value.icon,size:"32rpx",color:"#FFFFFF"},null,8,["name"]),r(C,null,{default:c(()=>[p(_(R.value.category),1)]),_:1})]),_:1},8,["class"]),r(s,{class:m(["status-tag",I.value.class])},{default:c(()=>[p(_(I.value.text),1)]),_:1},8,["class"])]),_:1}),r(s,{class:"title-section"},{default:c(()=>[r(C,{class:"main-title"},{default:c(()=>[p(_(R.value.title),1)]),_:1}),r(s,{class:"meta-info"},{default:c(()=>[r(s,{class:"meta-item"},{default:c(()=>[r(l,{name:"time",size:"28rpx",color:"#94A3B8"}),r(C,null,{default:c(()=>[p(_(R.value.fullTime||R.value.time),1)]),_:1})]),_:1}),R.value.publisher?(d(),i(s,{key:0,class:"meta-item"},{default:c(()=>[r(l,{name:"user",size:"28rpx",color:"#94A3B8"}),r(C,null,{default:c(()=>[p(_(R.value.publisher),1)]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1}),r(s,{class:"detail-card"},{default:c(()=>["vote"===R.value.type?(d(),i(s,{key:0,class:"vote-content"},{default:c(()=>[r(s,{class:"section-title"},{default:c(()=>[p("投票描述")]),_:1}),r(C,{class:"description"},{default:c(()=>[p(_(R.value.desc),1)]),_:1}),r(s,{class:"options-list"},{default:c(()=>[(d(),g(h,null,k(N,(e,a)=>r(s,{key:a,class:m(["option-item",{active:G.value===a}]),onClick:e=>(e=>{var a;(null==(a=R.value)?void 0:a.isClosed)||(G.value=e)})(a)},{default:c(()=>[r(s,{class:m(["radio-box",{active:G.value===a}])},{default:c(()=>[G.value===a?(d(),i(s,{key:0,class:"radio-inner"})):y("",!0)]),_:2},1032,["class"]),r(C,{class:"option-text"},{default:c(()=>[p(_(e.label),1)]),_:2},1024),R.value.isClosed?(d(),i(C,{key:0,class:"vote-count"},{default:c(()=>[p(_(e.count)+"票",1)]),_:2},1024)):y("",!0)]),_:2},1032,["class","onClick"])),64))]),_:1}),R.value.isClosed?(d(),i(s,{key:0,class:"vote-stats"},{default:c(()=>[r(s,{class:"stat-item"},{default:c(()=>[r(C,{class:"label"},{default:c(()=>[p("参与人数")]),_:1}),r(C,{class:"value"},{default:c(()=>[p("156人")]),_:1})]),_:1}),r(s,{class:"stat-item"},{default:c(()=>[r(C,{class:"label"},{default:c(()=>[p("投票截止")]),_:1}),r(C,{class:"value"},{default:c(()=>[p("2024-03-25")]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1})):"repair"===R.value.type||"voice"===R.value.type?(d(),i(s,{key:1,class:"process-content"},{default:c(()=>[r(s,{class:"section-title"},{default:c(()=>[p("反馈内容")]),_:1}),r(C,{class:"description"},{default:c(()=>[p(_(R.value.desc),1)]),_:1}),R.value.images&&R.value.images.length>0?(d(),i(s,{key:0,class:"image-grid"},{default:c(()=>[(d(!0),g(h,null,k(R.value.images,(e,a)=>(d(),i(x,{key:a,src:e,mode:"aspectFill",class:"grid-img",onClick:e=>{return l=R.value.images,t=a,void(l&&j({urls:l,current:l[t]}));var l,t}},null,8,["src","onClick"]))),128))]),_:1})):y("",!0),r(s,{class:"section-title mt-48"},{default:c(()=>[p("处理进度")]),_:1}),r(s,{class:"timeline"},{default:c(()=>[(d(),g(h,null,k(S,(e,a)=>r(s,{key:a,class:m(["timeline-item",{last:a===S.length-1,active:0===a}])},{default:c(()=>[r(s,{class:"line-box"},{default:c(()=>[r(s,{class:"dot"}),a!==S.length-1?(d(),i(s,{key:0,class:"line"})):y("",!0)]),_:2},1024),r(s,{class:"step-content"},{default:c(()=>[r(s,{class:"step-header"},{default:c(()=>[r(C,{class:"step-title"},{default:c(()=>[p(_(e.title),1)]),_:2},1024),r(C,{class:"step-time"},{default:c(()=>[p(_(e.time),1)]),_:2},1024)]),_:2},1024),r(C,{class:"step-desc"},{default:c(()=>[p(_(e.desc),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])),64))]),_:1})]),_:1})):(d(),i(s,{key:2,class:"notice-content"},{default:c(()=>[r(s,{class:"rich-text"},{default:c(()=>[p(_(R.value.content||R.value.desc),1)]),_:1}),R.value.attachments?(d(),i(s,{key:0,class:"attachments"},{default:c(()=>[r(s,{class:"section-title"},{default:c(()=>[p("附件列表")]),_:1}),(d(!0),g(h,null,k(R.value.attachments,(e,a)=>(d(),i(s,{class:"file-item",key:a,onClick:a=>(e=>{z({title:"文件预览中"}),setTimeout(()=>{T(),B({title:"暂不支持预览 "+e.name,icon:"none"})},1e3)})(e)},{default:c(()=>[r(s,{class:"file-icon"},{default:c(()=>[r(l,{name:"attach",size:"40rpx",color:"@primary-blue"})]),_:1}),r(s,{class:"file-info"},{default:c(()=>[r(C,{class:"file-name"},{default:c(()=>[p(_(e.name),1)]),_:2},1024),r(C,{class:"file-size"},{default:c(()=>[p(_(e.size),1)]),_:2},1024)]),_:2},1024),r(l,{name:"download",size:"32rpx",color:"#94A3B8"})]),_:2},1032,["onClick"]))),128))]),_:1})):y("",!0)]),_:1}))]),_:1})]),_:1})):y("",!0),r(s,{class:"bottom-padding"})]),_:1}),R.value&&!R.value.isClosed?(d(),i(s,{key:0,class:"footer-actions"},{default:c(()=>["vote"===R.value.type?(d(),i(E,{key:0,theme:"primary",size:"large",block:"",shape:"round",disabled:null===G.value,onClick:K},{default:c(()=>[p(" 提交投票 ")]),_:1},8,["disabled"])):"repair"===R.value.type||"voice"===R.value.type?(d(),i(E,{key:1,theme:"light",size:"large",block:"",shape:"round",onClick:O},{default:c(()=>[p(" 联系物业 ")]),_:1})):(d(),i(E,{key:2,theme:"primary",size:"large",block:"",variant:"outline",shape:"round",onClick:P},{default:c(()=>[p(" 分享给邻居 ")]),_:1}))]),_:1})):y("",!0)]),_:1})}}}),[["__scopeId","data-v-400a3ae3"]]);export{G as default};
