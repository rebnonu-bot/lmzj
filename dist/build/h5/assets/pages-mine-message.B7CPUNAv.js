import{d as e,r as a,c as s,b as t,w as l,i as c,e as o,f as i,j as r,k as d,n,F as u,p as m,x as f,v as p,l as v,m as _,t as g,E as y,G as b,C as k,A as R,z as h}from"./index-8WK0Ux_r.js";import{_ as x,a as C}from"./icon.CNXA9uzs.js";import{_ as j}from"./navbar.CrUfp4xJ.js";import{_ as F,a as w}from"./tabs.4C80p3h0.js";import"./parent-map.DLFD9qfo.js";import"./relation.DsLEl_h2.js";import"./badge.Dporcbm2.js";const z=C(e({__name:"message",setup(e){const C=a("all"),z=a([{id:"1",title:"关于2026年度物业服务续聘表决的投票邀请",desc:"尊敬的业主刘泽辉，您的房屋阳光水岸一期 1-1-802 关联了新的电子投票，请及时参与。",time:"10:30",category:"电子投票",categoryCode:"vote",icon:"edit-1",isRead:!1,type:"vote"},{id:"2",title:"1月物业费账单已出",desc:"您好，阳光水岸一期 1-1-802 的1月物业费账单已生成，请及时缴纳。",time:"昨天",category:"费用账单",categoryCode:"bill",icon:"wallet",isRead:!1,type:"bill"},{id:"3",title:"报修处理进度更新",desc:"您提交的“客厅灯泡不亮”报修申请，维修师傅已接单，预计今日14:00上门。",time:"02-08",category:"报修服务",categoryCode:"repair",icon:"tools",isRead:!0,type:"repair"},{id:"4",title:"房屋认证成功通知",desc:"恭喜！您名下的“阳光水岸二期 5-1-1202”已通过实名认证。",time:"02-05",category:"系统通知",categoryCode:"notice",icon:"check-circle",isRead:!0,type:"notice"}]),E=()=>{y().length>1?b():k({url:"/pages/mine/mine"})},S=e=>{e&&"object"==typeof e?void 0!==e.value?C.value=String(e.value):e.detail&&void 0!==e.detail.value&&(C.value=String(e.detail.value)):void 0!==e&&(C.value=String(e))},B=s(()=>{const e=String(C.value);return"unread"===e?z.value.filter(e=>!e.isRead):"read"===e?z.value.filter(e=>e.isRead):z.value}),G=s(()=>z.value.some(e=>!e.isRead)),$=()=>{z.value.forEach(e=>e.isRead=!0),h({title:"已全部标记为已读",icon:"success"})};return(e,a)=>{const s=o(i("t-icon"),x),y=o(i("t-navbar"),j),b=o(i("t-tab-panel"),F),k=o(i("t-tabs"),w),h=c,z=v;return r(),t(h,{class:"page-container"},{default:l(()=>[d(y,{title:"我的消息","left-arrow":"",onGoBack:E,fixed:!1,class:"custom-navbar"},{"left-icon":l(()=>[d(s,{name:"chevron-left",size:"48rpx",color:"#1E293B"})]),_:1}),d(h,{class:"tabs-wrapper"},{default:l(()=>[d(k,{value:C.value,onClick:S,"bottom-line":!0,class:"custom-tabs"},{default:l(()=>[d(b,{label:"全部",value:"all"}),d(b,{label:"未读",value:"unread"}),d(b,{label:"已读",value:"read"})]),_:1},8,["value"])]),_:1}),d(h,{class:"message-scroll"},{default:l(()=>[B.value.length>0?(r(),t(h,{key:0,class:"message-list"},{default:l(()=>[(r(!0),n(u,null,m(B.value,(e,a)=>(r(),t(h,{key:e.id,class:"message-card",onClick:a=>(e=>{e.isRead=!0,R({url:`/pages/mine/message-detail?id=${e.id}&type=${e.type}`})})(e)},{default:l(()=>[d(h,{class:"card-left"},{default:l(()=>[d(h,{class:f(["icon-box",e.categoryCode])},{default:l(()=>[d(s,{name:e.icon,size:"44rpx",color:"#FFFFFF"},null,8,["name"])]),_:2},1032,["class"]),e.isRead?p("",!0):(r(),t(h,{key:0,class:"unread-dot"}))]),_:2},1024),d(h,{class:"card-content"},{default:l(()=>[d(h,{class:"header-row"},{default:l(()=>[d(z,{class:"category-name"},{default:l(()=>[_(g(e.category),1)]),_:2},1024),d(z,{class:"message-time"},{default:l(()=>[_(g(e.time),1)]),_:2},1024)]),_:2},1024),d(h,{class:"title-row"},{default:l(()=>[d(z,{class:f(["message-title",{read:e.isRead}])},{default:l(()=>[_(g(e.title),1)]),_:2},1032,["class"])]),_:2},1024),d(h,{class:"desc-row"},{default:l(()=>[d(z,{class:"message-desc"},{default:l(()=>[_(g(e.desc),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(h,{class:"card-right"},{default:l(()=>[d(s,{name:"chevron-right",size:"32rpx",color:"#CBD5E1"})]),_:1})]),_:2},1032,["onClick"]))),128)),d(h,{class:"load-more"},{default:l(()=>[d(z,null,{default:l(()=>[_("没有更多消息了")]),_:1})]),_:1})]),_:1})):(r(),t(h,{key:1,class:"empty-state"},{default:l(()=>[d(s,{name:"chat-error",size:"120rpx",color:"#E2E8F0"}),d(z,{class:"empty-text"},{default:l(()=>[_("暂无相关消息")]),_:1})]),_:1}))]),_:1}),G.value?(r(),t(h,{key:0,class:"bottom-bar"},{default:l(()=>[d(h,{class:"action-btn",onClick:$},{default:l(()=>[d(s,{name:"check-double",size:"36rpx",color:"#3B82F6"}),d(z,null,{default:l(()=>[_("全部已读")]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1})}}}),[["__scopeId","data-v-5d5f51d0"]]);export{z as default};
