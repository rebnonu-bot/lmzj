import{d as e,r as a,a as l,D as s,c as t,b as i,w as c,i as u,e as n,f as o,j as r,k as d,l as f,m as p,I as m,x as _,_ as v,$ as b,s as y,n as h,F as g,p as T,t as k,B as x,v as C,G as z,A as B}from"./index-8WK0Ux_r.js";import{_ as w,a as F}from"./icon.CNXA9uzs.js";import{_ as j}from"./app-footer.ZfEswbZz.js";import{V}from"./VoteCard.RlULB-26.js";const A=F(e({__name:"voting",setup(e){const F=a(""),A=a(0),D=a(0),I=a("all"),$=a(!1),E=a(!0);l(()=>{setTimeout(()=>{E.value=!1},800)}),s(e=>{e&&e.status&&(I.value=e.status)});const L=()=>{$.value=!$.value},G=[{label:"全部",value:"all",subTabs:[]},{label:"一般重大事项",value:"normal",subTabs:["全部","物业费调整","物业选聘","使用维修资金","管理规约","业委会选举"]},{label:"特别重大事项",value:"special",subTabs:["全部","筹集维修资金","改建重建","共有部分经营"]}],H=t(()=>{var e;return(null==(e=G[A.value])?void 0:e.subTabs)||[]}),U=()=>{z()},X=e=>{e&&e.id?B({url:`/pages/voting/reminder?id=${e.id}`}):B({url:"/pages/voting/vote-topics?tab=1"})},Y=e=>{e&&e.id?B({url:`/pages/voting/vote-result?id=${e.id}`}):B({url:"/pages/voting/vote-topics?tab=2"})},q=a([{id:1,title:"阳光水岸小区第三届业主委员会选举",startTime:"2026-01-15 00:00",endTime:"01-25 23:59",statusText:"已结束",statusType:"ended",mainType:"normal",type:"业委会选举",participants:450},{id:2,title:"阳光水岸2026年度物业服务续聘表决",startTime:"2025-12-01 00:00",endTime:"02-28 23:59",statusText:"进行中",statusType:"ongoing",mainType:"normal",type:"物业选聘",participants:128},{id:3,title:"阳光水岸1-1单元电梯更新改造维修资金使用投票",startTime:"2026-02-01 00:00",endTime:"02-20 23:59",statusText:"进行中",statusType:"ongoing",mainType:"normal",type:"使用维修资金",participants:45},{id:4,title:"阳光水岸2026年公共收益分配方案投票",startTime:"2026-01-10 00:00",endTime:"01-30 23:59",statusText:"已结束",statusType:"ended",mainType:"special",type:"共有部分经营",participants:560},{id:5,title:"阳光水岸关于筹集二期专项维修资金的表决",startTime:"2026-02-05 00:00",endTime:"02-25 23:59",statusText:"进行中",statusType:"ongoing",mainType:"special",type:"筹集维修资金",participants:89},{id:6,title:"关于阳光水岸物业费调整（由1.8元/㎡调至2.1元/㎡）的投票",startTime:"2026-02-01 00:00",endTime:"02-28 23:59",statusText:"进行中",statusType:"ongoing",mainType:"normal",type:"物业费调整",participants:234}]),J=t(()=>{let e=q.value;"all"!==I.value&&(e=e.filter(e=>e.statusType===I.value));const a=G[A.value];if(a&&"all"!==a.value){e=e.filter(e=>e.mainType===a.value);const l=H.value[D.value];l&&"全部"!==l&&(e=e.filter(e=>e.type===l))}if(F.value){const a=F.value.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(a))}return e}),K=t(()=>J.value.slice(0,5)),M=()=>{B({url:"/pages/voting/vote-topics?tab=0"})};return(e,a)=>{const l=n(o("t-icon"),w),s=u,t=f,z=m,B=x,q=n(o("app-footer"),j);return r(),i(s,{class:"page-container"},{default:c(()=>[d(s,{class:"header-section"},{default:c(()=>[d(s,{class:"header-top"},{default:c(()=>[d(s,{class:"back-btn",onClick:U},{default:c(()=>[d(l,{name:"chevron-left",size:"48rpx",color:"#fff"})]),_:1})]),_:1}),d(s,{class:"header-content"},{default:c(()=>[d(s,{class:"title-group"},{default:c(()=>[d(t,{class:"main-title"},{default:c(()=>[p("电子投票")]),_:1}),d(t,{class:"sub-title"},{default:c(()=>[p("公开透明 依法依规 共同建设美好家园")]),_:1})]),_:1}),d(s,{class:"header-illust"},{default:c(()=>[d(s,{class:"illust-glass-card card-back"}),d(s,{class:"illust-glass-card card-front"},{default:c(()=>[d(s,{class:"vote-box"},{default:c(()=>[d(s,{class:"paper"})]),_:1})]),_:1}),d(s,{class:"illust-badge"},{default:c(()=>[d(l,{name:"check-circle-filled",size:"28rpx",color:"#10B981"})]),_:1})]),_:1})]),_:1})]),_:1}),d(s,{class:"search-section"},{default:c(()=>[d(s,{class:"search-container"},{default:c(()=>[d(l,{name:"search",size:"36rpx",color:"#94A3B8"}),d(z,{type:"text",modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),placeholder:"搜索小区名称","placeholder-style":"color: #94A3B8"},null,8,["modelValue"]),d(t,{class:"search-btn"},{default:c(()=>[p("搜索")]),_:1})]),_:1})]),_:1}),d(s,{class:"action-buttons-section"},{default:c(()=>[d(s,{class:"action-btn-item primary",onClick:X},{default:c(()=>[d(l,{name:"assignment",size:"40rpx",color:"#fff"}),d(t,null,{default:c(()=>[p("业主投票")]),_:1})]),_:1}),d(s,{class:"action-btn-item secondary",onClick:Y},{default:c(()=>[d(l,{name:"chart-line-data",size:"40rpx",color:"#3B82F6"}),d(t,null,{default:c(()=>[p("投票结果")]),_:1})]),_:1})]),_:1}),d(s,{class:"voting-rules-container"},{default:c(()=>[d(s,{class:_(["rules-card",{"is-expanded":$.value}])},{default:c(()=>[d(s,{class:"rules-header",onClick:L},{default:c(()=>[d(s,{class:"header-left"},{default:c(()=>[d(l,{name:"info-circle-filled",size:"32rpx",color:"#3B82F6"}),d(t,{class:"rules-title"},{default:c(()=>[p("民法典表决规则指引")]),_:1}),d(l,{name:$.value?"chevron-up":"chevron-down",size:"32rpx",color:"#3B82F6",class:"toggle-icon"},null,8,["name"])]),_:1}),d(s,{class:"header-right"},{default:c(()=>[p("依据《民法典》第278条")]),_:1})]),_:1}),v(d(s,{class:"rules-list-wrapper"},{default:c(()=>[d(s,{class:"rules-list"},{default:c(()=>[d(s,{class:"rule-card-item normal"},{default:c(()=>[d(s,{class:"item-top"},{default:c(()=>[d(t,{class:"item-tag"},{default:c(()=>[p("一般重大事项")]),_:1}),d(s,{class:"item-threshold"},{default:c(()=>[d(t,{class:"threshold-label"},{default:c(()=>[p("表决门槛：")]),_:1}),d(t,{class:"threshold-value"},{default:c(()=>[p("双过半")]),_:1})]),_:1})]),_:1}),d(s,{class:"item-content"},{default:c(()=>[p(" 物业费调整、选聘/解聘物业、使用维修资金、制定管理规约等。 ")]),_:1}),d(s,{class:"item-footer"},{default:c(()=>[d(l,{name:"check-circle",size:"24rpx",color:"#3B82F6"}),d(t,null,{default:c(()=>[p("参与业主面积过半 + 人数过半同意")]),_:1})]),_:1})]),_:1}),d(s,{class:"rule-card-item special"},{default:c(()=>[d(s,{class:"item-top"},{default:c(()=>[d(t,{class:"item-tag"},{default:c(()=>[p("特别重大事项")]),_:1}),d(s,{class:"item-threshold"},{default:c(()=>[d(t,{class:"threshold-label"},{default:c(()=>[p("表决门槛：")]),_:1}),d(t,{class:"threshold-value"},{default:c(()=>[p("双3/4")]),_:1})]),_:1})]),_:1}),d(s,{class:"item-content"},{default:c(()=>[p(" ①筹集维修资金；②改建、重建建筑物；③改变共有部分用途 or 经营。 ")]),_:1}),d(s,{class:"item-footer"},{default:c(()=>[d(l,{name:"check-circle",size:"24rpx",color:"#EF4444"}),d(t,null,{default:c(()=>[p("参与业主面积3/4以上 + 人数3/4以上同意")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[b,$.value]])]),_:1},8,["class"])]),_:1}),d(s,{class:"tabs-bar"},{default:c(()=>[d(s,{class:"main-tabs-container"},{default:c(()=>[d(s,{class:"tabs-slider",style:y({width:100/G.length+"%",transform:"translateX("+100*A.value+"%)"})},null,8,["style"]),(r(),h(g,null,T(G,(e,a)=>d(s,{key:a,class:_(["main-tab-item",{active:A.value===a}]),onClick:e=>(e=>{A.value=e,D.value=0,I.value="all"})(a)},{default:c(()=>[d(t,{class:"tab-label"},{default:c(()=>[p(k(e.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1}),H.value.length>0?(r(),i(s,{key:0,class:"sub-tabs-container"},{default:c(()=>[d(B,{"scroll-x":"",class:"sub-tabs-scroll","show-scrollbar":"false"},{default:c(()=>[(r(!0),h(g,null,T(H.value,(e,a)=>(r(),i(s,{key:a,class:_(["sub-tab-item",{active:D.value===a}]),onClick:e=>D.value=a},{default:c(()=>[d(t,null,{default:c(()=>[p(k(e),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})):C("",!0)]),_:1}),d(B,{"scroll-y":"",class:"content-scroll"},{default:c(()=>[E.value?(r(),i(s,{key:0,class:"vote-list skeleton-list"},{default:c(()=>[(r(),h(g,null,T(3,e=>d(s,{key:e,class:"skeleton-card"},{default:c(()=>[d(s,{class:"skeleton-item header-skel"}),d(s,{class:"skeleton-item content-skel"}),d(s,{class:"skeleton-item footer-skel"})]),_:2},1024)),64))]),_:1})):K.value.length>0?(r(),i(s,{key:1,class:"vote-list animate-fade-in"},{default:c(()=>[(r(!0),h(g,null,T(K.value,(e,a)=>(r(),i(V,{key:e.id,vote:e,class:"animate-slide-up",style:y({animationDelay:.1*a+"s"}),onClick:a=>"ongoing"===e.statusType?X(e):Y(e)},null,8,["vote","style","onClick"]))),128)),J.value.length>5?(r(),i(s,{key:0,class:"more-btn-wrapper",onClick:M},{default:c(()=>[d(s,{class:"more-btn"},{default:c(()=>[d(t,null,{default:c(()=>[p("查看更多投票项目")]),_:1}),d(l,{name:"chevron-right",size:"32rpx",color:"#3B82F6"})]),_:1})]),_:1})):(r(),i(s,{key:1,class:"list-end"},{default:c(()=>[d(t,null,{default:c(()=>[p("没有更多了")]),_:1})]),_:1}))]),_:1})):(r(),i(s,{key:2,class:"empty-state"},{default:c(()=>[d(l,{name:"info-circle",size:"64rpx",color:"#CBD5E1"}),d(t,{class:"empty-text"},{default:c(()=>[p("暂无相关投票")]),_:1})]),_:1}))]),_:1}),d(q)]),_:1})}}}),[["__scopeId","data-v-0436a3ba"]]);export{A as default};
