import{c as t,u as e,_ as a,p as o,q as s,r as n,v as i,t as l,a as c}from"./icon.CJOHyHK1.js";import{e as r,f as p,j as d,b as m,w as h,k as u,i as y,x as f,R as g,v as _,m as v,t as C,l as b,n as x,F as k,p as $}from"./index-PUK5Iwtz.js";import{_ as T}from"./button.GJ5z5xt4.js";import{_ as B,u as P}from"./popup.DXni-6bZ.js";const O={actions:{type:Array},buttonLayout:{type:String,default:"horizontal",validator:t=>!t||["horizontal","vertical"].includes(t)},cancelBtn:{type:[String,Object]},closeBtn:{type:[Boolean,Object],default:!1},closeOnOverlayClick:Boolean,confirmBtn:{type:[String,Object]},content:{type:String},overlayProps:{type:Object,default:()=>({})},preventScrollThrough:{type:Boolean,default:!0},showOverlay:{type:Boolean,default:!0},title:{type:String},usingCustomNavbar:Boolean,visible:Boolean,zIndex:{type:Number,default:11500},onAction:{type:Function,default:()=>({})},onCancel:{type:Function,default:()=>({})},onClose:{type:Function,default:()=>({})},onConfirm:{type:Function,default:()=>({})},onOverlayClick:{type:Function,default:()=>({})}};function z(t){return t.replace(/^(\w)/,(t,e)=>`data${e.toUpperCase()}`)}function S(t){Object.keys(t).forEach(e=>{this[z(e)]=t[e]})}const A=`${o}-dialog`,j=e({name:A,options:{styleIsolation:"shared"},externalClasses:[`${o}-class`,`${o}-class-content`,`${o}-class-confirm`,`${o}-class-cancel`,`${o}-class-action`],mixins:[(w=O,{data(){return{...(t=this,e=w,Object.keys(e).reduce((e,a)=>(e[z(a)]=t[a],e),{}))};var t,e},watch:{...(M=w,Object.keys(M).reduce((t,e)=>(t[e]={handler(t){this[z(e)]=t}},t),{}))},methods:{setData(t){S.call(this,t)}}}),P],components:{TPopup:B,TIcon:a,TButton:T},props:{...O},data:()=>({prefix:o,classPrefix:A,buttonVariant:"text",tools:l,_confirm:null,_cancel:null,useVirtualHost:i()}),watch:{dataConfirmBtn:{handler(){this.onWatchBtn(this.dataConfirmBtn,this.dataCancelBtn)},immediate:!0},dataCancelBtn:{handler(){this.onWatchBtn(this.dataConfirmBtn,this.dataCancelBtn)},immediate:!0}},methods:{coalesce:t,getActionClass:function(e,a,o,s){const n=[`${e}__button`,`${e}__button--action`];return a&&n.push(`${e}__button--${a}`),`${n.join(" ")} ${t(o.tClass,s)}`},onWatchBtn(t,e){const{prefix:a,classPrefix:o,dataButtonLayout:l}=this,c={buttonVariant:"text"},r=[t,e].some(t=>n(t)&&t.variant&&"text"!==t.variant),p={confirm:t,cancel:e},d=[`${o}__button`],m=[];r?(c.buttonVariant="base",d.push(`${o}__button--${l}`)):(d.push(`${o}__button--text`),m.push(`${o}-button`));const h=i();Object.keys(p).forEach(t=>{const e=p[t],n=[...d,`${o}__button--${t}`],i=[...m,this[s(`${a}-class-${t}`)],...n].join(" "),l={block:!0,rootClass:n,tClass:h?i:"",class:h?"":i,variant:c.buttonVariant,openType:""};"cancel"===t&&"base"===c.buttonVariant&&(l.theme="light"),c[`_${t}`]="string"==typeof e?{...l,content:e}:e&&"object"==typeof e?{...l,...e}:null}),Object.keys(c).forEach(t=>{this[t]=c[t]})},onTplButtonTap(t,{type:e,extra:a}){var o,n,i;const l=t.type,c=this[`_${e}`],r=`bind${l}`;if("action"===e)return void this.onActionTap(a);if("function"==typeof(null==c?void 0:c[r])){c[r](t)&&this.close()}if(!!!(null==c?void 0:c.openType)&&["confirm","cancel"].includes(e)&&(null==(o=this[s(`on-${e}`)])||o.call(this,e)),"click"!==l){const e=(null==(i=null==(n=t.detail)?void 0:n.errMsg)?void 0:i.indexOf("ok"))>-1;this.$emit(e?"open-type-event":"open-type-error-event",t.detail)}},onConfirm(t){this.$emit("confirm",{e:t}),this._onConfirm&&(this._onConfirm({trigger:"confirm"}),this.close())},onCancel(t){const e={trigger:"cancel"};this.$emit("cancel",{e:t}),this.$emit("close",e),this._onCancel&&(this._onCancel(e),this.close())},onClose(){var t;const e={trigger:"close-btn"};this.$emit("close",e),null==(t=this._onCancel)||t.call(this,e),this.close()},close(){this.dataVisible=!1},overlayClick(t){var e;if(this.$emit("overlay-click",{e:t}),this.dataCloseOnOverlayClick){const t={trigger:"overlay"};this.$emit("close",t),null==(e=this._onCancel)||e.call(this,t),this.close()}},onActionTap(t){this.$emit("action",{index:t}),this._onAction&&(this._onAction({index:t}),this.close())}}});var w,M;const L=c(j,[["render",function(t,e,o,s,n,i){const l=r(p("t-icon"),a),c=y,P=b,O=r(p("t-button"),T),z=r(p("t-popup"),B);return d(),m(z,{name:"dialog","custom-style":t.tools._style([t.customStyle]),"t-class":t.classPrefix+"__wrapper",visible:t.dataVisible,"show-overlay":t.dataShowOverlay,"close-on-overlay-click":t.dataCloseOnOverlayClick,"prevent-scroll-through":t.dataPreventScrollThrough,"overlay-props":t.dataOverlayProps,"z-index":t.dataZIndex,placement:"center","using-custom-navbar":t.dataUsingCustomNavbar,onVisibleChange:t.overlayClick},{content:h(()=>[u(c,{class:f(t.classPrefix+" "+t.tClass)},{default:h(()=>[g(t.$slots,"top",{},void 0,!0),t.dataCloseBtn?(d(),m(c,{key:0,class:f(t.classPrefix+"__close-btn"),onClick:t.onClose},{default:h(()=>[t.tools.isObject(t.dataCloseBtn)?(d(),m(l,{key:0,"custom-style":t.dataCloseBtn.style||"",prefix:t.dataCloseBtn.prefix,name:t.dataCloseBtn.name||"close",size:t.dataCloseBtn.size||22,color:t.dataCloseBtn.color,"aria-hidden":!0,"aria-label":t.dataCloseBtn.ariaLabel,"aria-role":t.dataCloseBtn.ariaRole},null,8,["custom-style","prefix","name","size","color","aria-label","aria-role"])):(d(),m(l,{key:1,name:"close",size:"44rpx"}))]),_:1},8,["class","onClick"])):_("",!0),u(c,{class:f(t.classPrefix+"__content "+t.tClassContent)},{default:h(()=>[t.dataTitle?(d(),m(c,{key:0,class:f(t.classPrefix+"__header")},{default:h(()=>[v(C(t.dataTitle),1)]),_:1},8,["class"])):_("",!0),g(t.$slots,"title",{},void 0,!0),t.dataContent?(d(),m(c,{key:1,class:f(t.classPrefix+"__body")},{default:h(()=>[u(P,{class:f(t.classPrefix+"__body-text")},{default:h(()=>[v(C(t.dataContent),1)]),_:1},8,["class"])]),_:1},8,["class"])):_("",!0),g(t.$slots,"content",{},void 0,!0)]),_:3},8,["class"]),g(t.$slots,"middle",{},void 0,!0),u(c,{class:f(t.tools.cls(t.classPrefix+"__footer",[["column","vertical"===t.dataButtonLayout],["full","text"==t.buttonVariant&&(!t.dataActions||0==t.dataActions.length)]]))},{default:h(()=>[t.dataActions?(d(!0),x(k,{key:0},$(t.dataActions,(e,a)=>(d(),m(O,{key:a,"t-id":e.tId,"custom-style":e.style,block:t.coalesce(e.block,!0),"t-class":t.useVirtualHost?t.getActionClass(t.classPrefix,t.dataButtonLayout,e,t.tClassAction):"",class:f(t.useVirtualHost?"":t.getActionClass(t.classPrefix,t.dataButtonLayout,e,t.tClassAction)),disabled:e.disabled,"data-type":"action","data-extra":t.coalesce(e.index,a),"custom-dataset":e.customDataset,content:e.content,icon:e.icon,loading:e.loading,"loading-props":e.loadingProps,theme:e.theme,ghost:e.ghost,shape:e.shape,size:e.size,variant:e.variant,"open-type":e.openType,"hover-class":e.hoverClass,"hover-stop-propagation":e.hoverStopPropagation,"hover-start-time":e.hoverStartTime,"hover-stay-time":e.hoverStayTime,lang:e.lang,"session-from":e.sessionFrom,"send-message-title":e.sendMessageTitle,"send-message-path":e.sendMessagePath,"send-message-img":e.sendMessageImg,"app-parameter":e.appParameter,"show-message-card":e.showMessageCard,"aria-label":e.ariaLabel,onClick:e=>t.onTplButtonTap(e,{type:"action",extra:a}),onGetuserinfo:e=>t.onTplButtonTap(e,{type:"action",extra:a}),onContact:e=>t.onTplButtonTap(e,{type:"action",extra:a}),onGetphonenumber:e=>t.onTplButtonTap(e,{type:"action",extra:a}),onError:e=>t.onTplButtonTap(e,{type:"action",extra:a}),onOpensetting:e=>t.onTplButtonTap(e,{type:"action",extra:a}),onLaunchapp:e=>t.onTplButtonTap(e,{type:"action",extra:a}),onAgreeprivacyauthorization:e=>t.onTplButtonTap(e,{type:"action",extra:a})},{default:h(()=>[e.useDefaultSlot?g(t.$slots,"default",{key:0},void 0,!0):_("",!0)]),_:2},1032,["t-id","custom-style","block","t-class","class","disabled","data-extra","custom-dataset","content","icon","loading","loading-props","theme","ghost","shape","size","variant","open-type","hover-class","hover-stop-propagation","hover-start-time","hover-stay-time","lang","session-from","send-message-title","send-message-path","send-message-img","app-parameter","show-message-card","aria-label","onClick","onGetuserinfo","onContact","onGetphonenumber","onError","onOpensetting","onLaunchapp","onAgreeprivacyauthorization"]))),128)):_("",!0),g(t.$slots,"actions",{},void 0,!0),t._cancel?(d(),m(O,{key:1,"t-id":t._cancel.tId,"custom-style":t._cancel.style,block:t._cancel.block,"t-class":t._cancel.tClass,class:f(t._cancel.class),disabled:t._cancel.disabled,"data-type":"cancel","data-extra":t._cancel.index,"custom-dataset":t._cancel.customDataset,content:t._cancel.content,icon:t._cancel.icon,loading:t._cancel.loading,"loading-props":t._cancel.loadingProps,theme:t._cancel.theme,ghost:t._cancel.ghost,shape:t._cancel.shape,size:t._cancel.size,variant:t._cancel.variant,"open-type":t._cancel.openType,"hover-class":t._cancel.hoverClass,"hover-stop-propagation":t._cancel.hoverStopPropagation,"hover-start-time":t._cancel.hoverStartTime,"hover-stay-time":t._cancel.hoverStayTime,lang:t._cancel.lang,"session-from":t._cancel.sessionFrom,"send-message-title":t._cancel.sendMessageTitle,"send-message-path":t._cancel.sendMessagePath,"send-message-img":t._cancel.sendMessageImg,"app-parameter":t._cancel.appParameter,"show-message-card":t._cancel.showMessageCard,"aria-label":t._cancel.ariaLabel,onClick:e[0]||(e[0]=e=>t.onCancel(e,{type:"action",extra:0})),onGetuserinfo:e[1]||(e[1]=e=>t.onCancel(e,{type:"action",extra:0})),onContact:e[2]||(e[2]=e=>t.onCancel(e,{type:"action",extra:0})),onGetphonenumber:e[3]||(e[3]=e=>t.onCancel(e,{type:"action",extra:0})),onError:e[4]||(e[4]=e=>t.onCancel(e,{type:"action",extra:0})),onOpensetting:e[5]||(e[5]=e=>t.onCancel(e,{type:"action",extra:0})),onLaunchapp:e[6]||(e[6]=e=>t.onCancel(e,{type:"action",extra:0})),onAgreeprivacyauthorization:e[7]||(e[7]=e=>t.onCancel(e,{type:"action",extra:0}))},{default:h(()=>[t._cancel.useDefaultSlot?g(t.$slots,"default",{key:0},void 0,!0):_("",!0)]),_:3},8,["t-id","custom-style","block","t-class","class","disabled","data-extra","custom-dataset","content","icon","loading","loading-props","theme","ghost","shape","size","variant","open-type","hover-class","hover-stop-propagation","hover-start-time","hover-stay-time","lang","session-from","send-message-title","send-message-path","send-message-img","app-parameter","show-message-card","aria-label"])):_("",!0),g(t.$slots,"cancel-btn",{},void 0,!0),t._confirm?(d(),m(O,{key:2,"t-id":t._confirm.tId,"custom-style":t._confirm.style,block:t._confirm.block,"t-class":t._confirm.tClass,class:f(t._confirm.class),disabled:t._confirm.disabled,"data-type":"confirm","data-extra":t._confirm.index,"custom-dataset":t._confirm.customDataset,content:t._confirm.content,icon:t._confirm.icon,loading:t._confirm.loading,"loading-props":t._confirm.loadingProps,theme:t._confirm.theme||"primary",ghost:t._confirm.ghost,shape:t._confirm.shape,size:t._confirm.size,variant:t._confirm.variant,"open-type":t._confirm.openType,"hover-class":t._confirm.hoverClass,"hover-stop-propagation":t._confirm.hoverStopPropagation,"hover-start-time":t._confirm.hoverStartTime,"hover-stay-time":t._confirm.hoverStayTime,lang:t._confirm.lang,"session-from":t._confirm.sessionFrom,"send-message-title":t._confirm.sendMessageTitle,"send-message-path":t._confirm.sendMessagePath,"send-message-img":t._confirm.sendMessageImg,"app-parameter":t._confirm.appParameter,"show-message-card":t._confirm.showMessageCard,"aria-label":t._confirm.ariaLabel,onClick:e[8]||(e[8]=e=>t.onConfirm(e,{type:"action",extra:0})),onGetuserinfo:e[9]||(e[9]=e=>t.onConfirm(e,{type:"action",extra:0})),onContact:e[10]||(e[10]=e=>t.onConfirm(e,{type:"action",extra:0})),onGetphonenumber:e[11]||(e[11]=e=>t.onConfirm(e,{type:"action",extra:0})),onError:e[12]||(e[12]=e=>t.onTplButtonConfirmonTap(e,{type:"action",extra:0})),onOpensetting:e[13]||(e[13]=e=>t.onConfirm(e,{type:"action",extra:0})),onLaunchapp:e[14]||(e[14]=e=>t.onConfirm(e,{type:"action",extra:0})),onAgreeprivacyauthorization:e[15]||(e[15]=e=>t.onConfirm(e,{type:"action",extra:0}))},{default:h(()=>[t._confirm.useDefaultSlot?g(t.$slots,"default",{key:0},void 0,!0):_("",!0)]),_:3},8,["t-id","custom-style","block","t-class","class","disabled","data-extra","custom-dataset","content","icon","loading","loading-props","theme","ghost","shape","size","variant","open-type","hover-class","hover-stop-propagation","hover-start-time","hover-stay-time","lang","session-from","send-message-title","send-message-path","send-message-img","app-parameter","show-message-card","aria-label"])):_("",!0),g(t.$slots,"confirm-btn",{},void 0,!0)]),_:3},8,["class"])]),_:3},8,["class"])]),_:3},8,["custom-style","t-class","visible","show-overlay","close-on-overlay-click","prevent-scroll-through","overlay-props","z-index","using-custom-navbar","onVisibleChange"])}],["__scopeId","data-v-cc21fb8a"]]);export{L as _};
