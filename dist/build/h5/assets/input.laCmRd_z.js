import{u as e,_ as a,p as s,g as t,n as l,i as o,c as i,b as r,t as n,a as c}from"./icon.CJOHyHK1.js";import{e as u,f as d,j as f,b as p,w as h,k as m,i as y,x,R as b,v as g,n as _,F as C,m as I,t as w,I as k,L as v,l as S,s as P}from"./index-PUK5Iwtz.js";import{R as V}from"./parent-map.DLFD9qfo.js";const $={adjustPosition:{type:Boolean,default:!0},align:{type:String,default:"left",validator:e=>!e||["left","center","right"].includes(e)},allowInputOverMax:Boolean,alwaysEmbed:Boolean,autoFocus:Boolean,borderless:Boolean,clearTrigger:{type:String,default:"always",validator:e=>!e||["always","focus"].includes(e)},clearable:{type:[Boolean,Object],default:!1},confirmHold:Boolean,confirmType:{type:String,default:"done",validator:e=>!e||["send","search","next","go","done"].includes(e)},cursor:{type:Number,default:-1},cursorColor:{type:String,default:"#0052d9"},cursorSpacing:{type:Number,default:0},disabled:{type:Boolean,default:void 0},focus:Boolean,format:{type:Function},holdKeyboard:Boolean,label:{type:String},layout:{type:String,default:"horizontal",validator:e=>!e||["vertical","horizontal"].includes(e)},maxcharacter:{type:Number},maxlength:{type:Number,default:-1},placeholder:{type:String,default:void 0},placeholderClass:{type:String,default:"input-placeholder"},placeholderStyle:{type:String,default:""},prefixIcon:{type:[String,Object]},readonly:{type:Boolean,default:void 0},safePasswordCertPath:{type:String,default:""},safePasswordCustomHash:{type:String,default:""},safePasswordLength:{type:Number},safePasswordNonce:{type:String,default:""},safePasswordSalt:{type:String,default:""},safePasswordTimeStamp:{type:Number},selectionEnd:{type:Number,default:-1},selectionStart:{type:Number,default:-1},status:{type:String,default:"default",validator:e=>!e||["default","success","warning","error"].includes(e)},suffix:{type:String},suffixIcon:{type:[String,Object]},tips:{type:String},type:{type:String,default:"text",validator:e=>!e||["text","number","idcard","digit","safe-password","password","nickname"].includes(e)},value:{type:[String,Number]},onBlur:{type:Function,default:()=>({})},onChange:{type:Function,default:()=>({})},onClear:{type:Function,default:()=>({})},onClick:{type:Function,default:()=>({})},onEnter:{type:Function,default:()=>({})},onFocus:{type:Function,default:()=>({})},onKeyboardheightchange:{type:Function,default:()=>({})},onNicknamereview:{type:Function,default:()=>({})},onValidate:{type:Function,default:()=>({})}};const F=`${s}-input`;const N=c(e({name:F,options:{styleIsolation:"shared"},inject:{[V.FormKey]:{default:null}},externalClasses:[`${s}-class`,`${s}-class-prefix-icon`,`${s}-class-label`,`${s}-class-input`,`${s}-class-clearable`,`${s}-class-suffix`,`${s}-class-suffix-icon`,`${s}-class-tips`],components:{TIcon:a},props:{...$},emits:["blur","change","clear","click","enter","focus","keyboardheightchange","nicknamereview","validate","update:value"],data(){return{prefix:s,classPrefix:F,classBasePrefix:s,showClearIcon:!0,tools:n,dataValue:i(this.value,this.defaultValue)}},computed:{},watch:{prefixIcon:{handler(e){this._prefixIcon=r(e)},immediate:!0},suffixIcon:{handler(e){this._suffixIcon=r(e)},immediate:!0},clearable:{handler(e){this._clearIcon=r(e,"close-circle-filled")},immediate:!0},clearTrigger:"updateClearIconVisible",disabled:"updateClearIconVisible",readonly:"updateClearIconVisible",value:{handler(e){this.dataValue=e,l().then(()=>{this.dataValue=e,this[V.FormKey]&&this[V.FormKey].onValueChange&&this[V.FormKey].onValueChange(e)})}}},mounted(){const{value:e,defaultValue:a}=this;this.updateValue(i(e,a,"")),this.updateClearIconVisible()},methods:{getInputClass:function(e,a,s,t){const l=[`${e}__control`];return s&&l.push(`${e}--${s}`),t&&l.push(`${e}__control--disabled`),l.join(" ")},updateValue(e){this.dataValue=e;const{allowInputOverMax:a,maxcharacter:s,maxlength:i}=this;if(!a&&s&&s>0&&!Number.isNaN(s)){const{length:a,characters:o}=t("maxcharacter",e,s);l().then(()=>{this.dataValue=o}),this.count=a}else if(!a&&i&&i>0&&!Number.isNaN(i)){const{length:a,characters:s}=t("maxlength",e,i);l().then(()=>{this.dataValue=s}),this.count=a}else l().then(()=>{this.dataValue=e}),this.dataValue=e,this.count=o(e)?String(e).length:0},updateClearIconVisible(e=!1){const{clearTrigger:a,disabled:s,readonly:t}=this;this.showClearIcon=!s&&!t&&(e||"always"===a)},onInput(e){const{value:a,cursor:s,keyCode:t}=e.detail;this.updateValue(a),this.emitChange({value:this.dataValue,cursor:s,keyCode:t})},onChange(e){if("nickname"!==this.type)return;const{value:a}=e.detail;this.updateValue(a),this.emitChange({value:this.dataValue})},emitChange(e){this.$emit("change",e),this.$emit("update:value",e.value)},onFocus(e){this.updateClearIconVisible(!0),this.$emit("focus",e.detail)},onBlur(e){if(this.updateClearIconVisible(),this[V.FormKey]&&this[V.FormKey].onBlur&&this[V.FormKey].onBlur(this.dataValue),"function"==typeof this.format){const a=this.format(e.detail.value);return this.updateValue(a),void this.$emit("blur",{value:this.dataValue,cursor:this.count})}this.$emit("blur",e.detail)},onConfirm(e){this.$emit("enter",e.detail)},onSuffixClick(){this.$emit("click",{trigger:"suffix"})},onSuffixIconClick(){this.$emit("click",{trigger:"suffix-icon"})},clearInput(e){this.$emit("clear",e.detail),this.dataValue=""},onKeyboardHeightChange(e){this.$emit("keyboardheightchange",e.detail)},onNickNameReview(e){this.$emit("nicknamereview",e.detail)},onClick(){this.$emit("click",{trigger:"input"})}}}),[["render",function(e,s,t,l,o,i){const r=u(d("t-icon"),a),n=y,c=k,V=S;return f(),p(n,{style:P(e.tools._style([e.customStyle])),class:x(e.tools.cls(e.classPrefix,[["border",!e.borderless],["readonly",e.readonly],["disabled",e.disabled]])+" "+e.classPrefix+"--layout-"+e.layout+" "+e.tClass),"aria-describedby":""},{default:h(()=>[m(n,{class:x(e.classPrefix+"__wrap--prefix")},{default:h(()=>[m(n,{class:x(e.classPrefix+"__icon--prefix")},{default:h(()=>[b(e.$slots,"prefix-icon",{},void 0,!0),e._prefixIcon?(f(),p(r,{key:0,"custom-style":e._prefixIcon.style||"","t-class":e.tClassPrefixIcon,prefix:e._prefixIcon.prefix,name:e._prefixIcon.name,size:e._prefixIcon.size,color:e._prefixIcon.color,"aria-hidden":!0,"aria-label":e._prefixIcon.ariaLabel,"aria-role":e._prefixIcon.ariaRole,onClick:s[0]||(s[0]=a=>e._prefixIcon.click||"")},null,8,["custom-style","t-class","prefix","name","size","color","aria-label","aria-role"])):g("",!0)]),_:3},8,["class"]),m(n,{class:x(e.classPrefix+"__label "+e.tClassLabel),"aria-hidden":""},{default:h(()=>[b(e.$slots,"label",{},void 0,!0),e.label?(f(),_(C,{key:0},[I(w(e.label),1)],64)):g("",!0)]),_:3},8,["class"])]),_:3},8,["class"]),m(n,{class:x(e.classPrefix+"__wrap")},{default:h(()=>[m(n,{class:x(e.classPrefix+"__content "+e.classPrefix+"--"+e.status),onClick:e.onClick},{default:h(()=>[m(c,{class:x(e.getInputClass(e.classPrefix,e.suffix,e.align,e.disabled)+" "+e.tClassInput),maxlength:e.allowInputOverMax?-1:e.maxlength,disabled:e.disabled||e.readonly,placeholder:e.placeholder,"placeholder-style":e.placeholderStyle,"placeholder-class":e.tools.cls(e.classPrefix+"__placeholder",[["disabled",e.disabled]])+" "+e.placeholderClass,value:e.dataValue,password:"password"===e.type,type:"password"===e.type?"text":e.type,focus:e.focus,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-color":e.cursorColor,"cursor-spacing":e.cursorSpacing,"adjust-position":e.adjustPosition,"auto-focus":e.autoFocus,"always-embed":e.alwaysEmbed,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"hold-keyboard":e.holdKeyboard,"safe-password-cert-path":e.safePasswordCertPath,"safe-password-length":e.safePasswordLength,"safe-password-time-stamp":e.safePasswordTimeStamp,"safe-password-nonce":e.safePasswordNonce,"safe-password-salt":e.safePasswordSalt,"safe-password-custom-hash":e.safePasswordCustomHash,"aria-role":"textbox","aria-label":e.label,"aria-roledescription":e.label,onInput:e.onInput,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,onConfirm:e.onConfirm,onKeyboardheightchange:e.onKeyboardHeightChange,onNicknamereview:e.onNickNameReview},null,8,["class","maxlength","disabled","placeholder","placeholder-style","placeholder-class","value","password","type","focus","confirm-type","confirm-hold","cursor","cursor-color","cursor-spacing","adjust-position","auto-focus","always-embed","selection-start","selection-end","hold-keyboard","safe-password-cert-path","safe-password-length","safe-password-time-stamp","safe-password-nonce","safe-password-salt","safe-password-custom-hash","aria-label","aria-roledescription","onInput","onChange","onFocus","onBlur","onConfirm","onKeyboardheightchange","onNicknamereview"]),e._clearIcon&&e.dataValue&&e.dataValue.length&&e.showClearIcon?(f(),p(n,{key:0,class:x(e.classPrefix+"__wrap--clearable-icon"),onClick:v(e.clearInput,["stop"])},{default:h(()=>[m(r,{"custom-style":e._clearIcon.style||"","t-class":e.tClassClearable,prefix:e._clearIcon.prefix,name:e._clearIcon.name,size:e._clearIcon.size,color:e._clearIcon.color,"aria-hidden":!1,"aria-label":e._clearIcon.ariaLabel||"清除","aria-role":e._clearIcon.ariaRole||"button",onClick:s[1]||(s[1]=a=>e._clearIcon.click||"")},null,8,["custom-style","t-class","prefix","name","size","color","aria-label","aria-role"])]),_:1},8,["class","onClick"])):g("",!0),m(n,{class:x(e.classPrefix+"__wrap--suffix "+e.tClassSuffix),onClick:e.onSuffixClick},{default:h(()=>[e.suffix?(f(),p(V,{key:0},{default:h(()=>[I(w(e.suffix),1)]),_:1})):g("",!0),b(e.$slots,"suffix",{},void 0,!0)]),_:3},8,["class","onClick"]),m(n,{class:x(e.classPrefix+"__wrap--suffix-icon"),onClick:e.onSuffixIconClick},{default:h(()=>[b(e.$slots,"suffix-icon",{},void 0,!0),e._suffixIcon?(f(),p(r,{key:0,"custom-style":e._suffixIcon.style||"","t-class":e.tClassSuffixIcon,prefix:e._suffixIcon.prefix,name:e._suffixIcon.name,size:e._suffixIcon.size,color:e._suffixIcon.color,"aria-hidden":!0,"aria-label":e._suffixIcon.ariaLabel,"aria-role":e._suffixIcon.ariaRole||"button",onClick:s[2]||(s[2]=a=>e._suffixIcon.click||"")},null,8,["custom-style","t-class","prefix","name","size","color","aria-label","aria-role"])):g("",!0)]),_:3},8,["class","onClick"])]),_:3},8,["class","onClick"]),e.tips&&e.tips.length>0?(f(),p(n,{key:0,class:x(e.classPrefix+"__tips "+e.classPrefix+"--"+e.align+" "+e.tClassTips)},{default:h(()=>[I(w(e.tips),1)]),_:1},8,["class"])):g("",!0),b(e.$slots,"tips",{},void 0,!0)]),_:3},8,["class"]),b(e.$slots,"extra",{},void 0,!0)]),_:3},8,["style","class"])}],["__scopeId","data-v-182631fb"]]);export{N as _};
