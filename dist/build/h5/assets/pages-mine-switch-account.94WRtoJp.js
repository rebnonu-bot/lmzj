import{d as e,r as a,b as s,w as l,i as t,e as c,f as u,j as n,k as o,x as i,m as r,t as d,l as p,K as m,Q as f,v,E as _,G as b,C as g,z as h,M as x,H as j}from"./index-PUK5Iwtz.js";import{_ as k,a as y}from"./icon.CJOHyHK1.js";import{_ as z}from"./navbar.COTAEQY7.js";import{_ as w}from"./button.GJ5z5xt4.js";import{_ as C}from"./input.laCmRd_z.js";import{c as I}from"./config.BxfTPpYJ.js";import"./loading.NVpDzvTL.js";import"./parent-map.DLFD9qfo.js";const T=y(e({__name:"switch-account",setup(e){const y=a(1),T=a(!1),B=a(!1),V=a(""),E=a(!1),G=a(60);let H=null;const M=()=>{_().length>1?b():g({url:"/pages/mine/mine"})},U=()=>{T.value=!0,setTimeout(()=>{T.value=!1,h({title:"识别成功",icon:"success"}),setTimeout(()=>{y.value=2,A()},1e3)},2e3)},A=()=>{E.value||(E.value=!0,H=setInterval(()=>{G.value>1?G.value--:(clearInterval(H),E.value=!1,G.value=60)},1e3))},F=()=>{E.value||(h({title:"验证码已发送",icon:"none"}),A())},K=()=>{B.value=!0,setTimeout(()=>{B.value=!1,x({title:"切换成功",content:"账号已成功切换至关联账号",showCancel:!1,success:()=>{j({url:"/pages/mine/mine"})}})},1500)};return(e,a)=>{const _=c(u("t-icon"),k),b=c(u("t-navbar"),z),g=t,h=p,x=m,j=c(u("t-button"),w),H=c(u("t-input"),C);return n(),s(g,{class:"page-container"},{default:l(()=>[o(b,{title:"身份验证","left-arrow":"",onGoBack:M,fixed:!1,class:"custom-navbar"},{"left-icon":l(()=>[o(_,{name:"chevron-left",size:"48rpx",color:"#1E293B"})]),_:1}),o(g,{class:"header-bg"}),o(g,{class:"step-header"},{default:l(()=>[o(g,{class:i(["step-item",{active:y.value>=1,completed:y.value>1}])},{default:l(()=>[o(g,{class:"step-num"},{default:l(()=>[r(d(y.value>1?"✓":"1"),1)]),_:1}),o(h,{class:"step-text"},{default:l(()=>[r("人脸识别")]),_:1})]),_:1},8,["class"]),o(g,{class:i(["step-line",{active:y.value>1}])},null,8,["class"]),o(g,{class:i(["step-item",{active:y.value>=2}])},{default:l(()=>[o(g,{class:"step-num"},{default:l(()=>[r("2")]),_:1}),o(h,{class:"step-text"},{default:l(()=>[r("短信验证")]),_:1})]),_:1},8,["class"])]),_:1}),o(g,{class:"content-wrapper"},{default:l(()=>[1===y.value?(n(),s(g,{key:0,class:"step-content face-step"},{default:l(()=>[o(g,{class:"face-scanner"},{default:l(()=>[o(g,{class:"scanner-box"},{default:l(()=>[o(x,{src:f(I).placeholderImage,mode:"aspectFill",class:"face-img"},null,8,["src"]),o(g,{class:"scan-line"})]),_:1}),o(g,{class:"scanner-tips"},{default:l(()=>[o(h,{class:"title"},{default:l(()=>[r("请将面部置于方框内")]),_:1}),o(h,{class:"desc"},{default:l(()=>[r("我们需要验证您的身份以确保账号安全")]),_:1})]),_:1})]),_:1}),o(j,{theme:"primary",size:"large",block:"",shape:"round",onClick:U,loading:T.value},{default:l(()=>[r(d(T.value?"正在识别...":"开始识别"),1)]),_:1},8,["loading"])]),_:1})):v("",!0),2===y.value?(n(),s(g,{key:1,class:"step-content sms-step"},{default:l(()=>[o(g,{class:"sms-header"},{default:l(()=>[o(h,{class:"title"},{default:l(()=>[r("输入验证码")]),_:1}),o(h,{class:"desc"},{default:l(()=>[r("验证码已发送至您的绑定手机号 138****8888")]),_:1})]),_:1}),o(g,{class:"input-section"},{default:l(()=>[o(H,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),placeholder:"请输入6位验证码",type:"number",maxlength:"6",size:"large",class:"code-input"},{suffix:l(()=>[o(g,{class:i(["resend-btn",{disabled:E.value}]),onClick:F},{default:l(()=>[r(d(E.value?`${G.value}s`:"重新获取"),1)]),_:1},8,["class"])]),_:1},8,["modelValue"])]),_:1}),o(g,{class:"submit-btn-box"},{default:l(()=>[o(j,{theme:"primary",size:"large",block:"",shape:"round",disabled:6!==V.value.length,onClick:K,loading:B.value},{default:l(()=>[r(" 确认切换 ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1})):v("",!0)]),_:1}),o(g,{class:"security-tips"},{default:l(()=>[o(_,{name:"secured",size:"28rpx",color:"#94A3B8"}),o(h,null,{default:l(()=>[r("安全环境监测中，请放心操作")]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-57476f97"]]);export{T as default};
