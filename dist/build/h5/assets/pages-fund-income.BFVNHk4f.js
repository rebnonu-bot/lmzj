import{d as a,r as e,a as t,c as l,b as s,w as c,i as n,e as u,f as o,j as i,k as d,l as r,m as f,t as _,n as p,F as m,p as y,x as b,v,B as h,s as x,E as g,G as k,H as w,z as T,A as C}from"./index-8WK0Ux_r.js";import{_ as F,a as z}from"./icon.CNXA9uzs.js";import{_ as D}from"./app-footer.ZfEswbZz.js";import{_ as M}from"./app-tab-bar.DbT_--yF.js";const j=z(a({__name:"income",setup(a){const z=e(!0),j=e(0);t(()=>{setTimeout(()=>{z.value=!1},800)});const B=["基本情况","收支记录","合同"],N=e("阳光水岸一期 1-1-802"),A=()=>{g().length>1?k():w({url:"/pages/index/index"})},E=()=>{T({title:"房屋绑定功能开发中",icon:"none"})},$=()=>{C({url:"/pages/fund/income-record-list"})},I=e({name:"阳光水岸一期业主委员会",account:"6222 **** **** 8892",bank:"中国建设银行赣州分行"}),S=e([{title:"电梯广告位租金收入",date:"2026-02-01",amount:"16000.00",type:"in",typeText:"收入"},{title:"电梯维保支出",date:"2026-02-05",amount:"9500.00",type:"out",typeText:"支出"},{title:"小区停车位租赁收入",date:"2026-01-20",amount:"22000.00",type:"in",typeText:"收入"},{title:"春节氛围装饰采购",date:"2026-01-10",amount:"14000.00",type:"out",typeText:"支出"},{title:"外墙广告位收益",date:"2025-12-15",amount:"18000.00",type:"in",typeText:"收入"},{title:"公共区域照明维修",date:"2025-12-05",amount:"12000.00",type:"out",typeText:"支出"},{title:"快递柜场地租赁费",date:"2025-11-30",amount:"11000.00",type:"in",typeText:"收入"},{title:"垃圾分类宣传费",date:"2025-11-10",amount:"7500.00",type:"out",typeText:"支出"},{title:"路面停车位收益",date:"2025-10-25",amount:"15000.00",type:"in",typeText:"收入"},{title:"小区绿化补植支出",date:"2025-10-10",amount:"9000.00",type:"out",typeText:"支出"},{title:"共有用房出租收益",date:"2025-09-15",amount:"12000.00",type:"in",typeText:"收入"},{title:"中秋节物业慰问支出",date:"2025-09-05",amount:"8000.00",type:"out",typeText:"支出"}]),H=l(()=>{const a=[],e=new Date;if(!S.value||!Array.isArray(S.value))return a;for(let t=5;t>=0;t--){const l=new Date(e.getFullYear(),e.getMonth()-t,1),s=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`,c=S.value.filter(a=>a.date&&"string"==typeof a.date&&a.date.startsWith(s)),n=c.filter(a=>"in"===a.type).reduce((a,e)=>{const t=parseFloat(e.amount);return a+(isNaN(t)?0:t)},0)/1e4,u=c.filter(a=>"out"===a.type).reduce((a,e)=>{const t=parseFloat(e.amount);return a+(isNaN(t)?0:t)},0)/1e4;a.push({month:`${l.getMonth()+1}月`,income:parseFloat(n.toFixed(2)),expense:parseFloat(u.toFixed(2))})}return a}),J=l(()=>{const a=H.value.flatMap(a=>[a.income,a.expense]),e=Math.max(...a);return e>0?1.2*e:1}),Y=e([{title:"分众传媒电梯广告租赁合同",company:"分众传媒有限公司",period:"2026-01-01 至 2027-12-31"},{title:"小区快递柜进驻协议",company:"丰巢科技有限公司",period:"2024-06-01 至 2027-05-31"},{title:"共有用房租赁协议 - A栋底商",company:"悦生活超市",period:"2023-08-01 至 2026-07-31"},{title:"饮水机场地租赁协议",company:"农夫山泉股份有限公司",period:"2026-01-01 至 2027-12-31"}]);return(a,e)=>{const t=u(o("t-icon"),F),l=n,g=r,k=h,w=u(o("app-footer"),D),T=u(o("app-tab-bar"),M);return i(),s(l,{class:"page-container"},{default:c(()=>[d(l,{class:"header-section"},{default:c(()=>[d(l,{class:"header-top"},{default:c(()=>[d(l,{class:"back-btn",onClick:A},{default:c(()=>[d(t,{name:"chevron-left",size:"48rpx",color:"#fff"})]),_:1})]),_:1}),d(l,{class:"header-main"},{default:c(()=>[d(l,{class:"title-box"},{default:c(()=>[d(g,{class:"main-title"},{default:c(()=>[f("公共收益余额")]),_:1}),d(g,{class:"sub-title"},{default:c(()=>[f("公开透明可监督")]),_:1}),d(l,{class:"house-info",onClick:E},{default:c(()=>[d(t,{name:"swap",size:"28rpx",color:"#fff",class:"swap-icon"}),d(g,null,{default:c(()=>[f(_(N.value),1)]),_:1})]),_:1})]),_:1}),d(l,{class:"header-illustration"},{default:c(()=>[d(l,{class:"illust-glass-card card-back"}),d(l,{class:"illust-glass-card card-front"},{default:c(()=>[d(t,{name:"wallet",size:"64rpx",color:"#fff"})]),_:1}),d(l,{class:"illust-coin coin-1"}),d(l,{class:"illust-coin coin-2"})]),_:1})]),_:1}),d(l,{class:"decor-circle"})]),_:1}),d(l,{class:"tabs-container"},{default:c(()=>[(i(),p(m,null,y(B,(a,e)=>d(l,{key:e,class:b(["tab-item",{active:j.value===e}]),onClick:a=>j.value=e},{default:c(()=>[d(g,null,{default:c(()=>[f(_(a),1)]),_:2},1024),j.value===e?(i(),s(l,{key:0,class:"active-bar"})):v("",!0)]),_:2},1032,["class","onClick"])),64))]),_:1}),d(k,{"scroll-y":"",class:"content-scroll"},{default:c(()=>[z.value?(i(),s(l,{key:0,class:"tab-content"},{default:c(()=>[d(l,{class:"skeleton-card balance-skeleton"}),d(l,{class:"skeleton-card info-skeleton"}),d(l,{class:"skeleton-card chart-skeleton"})]),_:1})):0===j.value?(i(),s(l,{key:1,class:"tab-content"},{default:c(()=>[d(l,{class:"balance-card animate-fade-in"},{default:c(()=>[d(l,{class:"balance-info"},{default:c(()=>[d(l,{class:"balance-header"},{default:c(()=>[d(g,{class:"label"},{default:c(()=>[f("公共收益余额")]),_:1}),d(g,{class:"sub-label"},{default:c(()=>[f("(数据来源于银行)")]),_:1})]),_:1}),d(l,{class:"balance-value"},{default:c(()=>[d(g,{class:"amount"},{default:c(()=>[f("12.85")]),_:1}),d(g,{class:"unit"},{default:c(()=>[f("万元")]),_:1})]),_:1})]),_:1}),d(l,{class:"balance-icon-box"},{default:c(()=>[d(l,{class:"coin-icon"},{default:c(()=>[f("¥")]),_:1})]),_:1})]),_:1}),d(l,{class:"info-list-card animate-fade-in",style:{"animation-delay":"0.1s"}},{default:c(()=>[d(l,{class:"info-row"},{default:c(()=>[d(g,{class:"i-label"},{default:c(()=>[f("银行账户")]),_:1}),d(g,{class:"i-value"},{default:c(()=>[f(_(I.value.name),1)]),_:1})]),_:1}),d(l,{class:"info-row"},{default:c(()=>[d(g,{class:"i-label"},{default:c(()=>[f("银行账号")]),_:1}),d(g,{class:"i-value"},{default:c(()=>[f(_(I.value.account),1)]),_:1})]),_:1}),d(l,{class:"info-row"},{default:c(()=>[d(g,{class:"i-label"},{default:c(()=>[f("开户银行")]),_:1}),d(g,{class:"i-value"},{default:c(()=>[f(_(I.value.bank),1)]),_:1})]),_:1})]),_:1}),d(l,{class:"chart-card animate-fade-in",style:{"animation-delay":"0.2s"}},{default:c(()=>[d(l,{class:"chart-header"},{default:c(()=>[d(g,{class:"chart-title"},{default:c(()=>[f("收支趋势量")]),_:1}),d(l,{class:"chart-legend"},{default:c(()=>[d(l,{class:"legend-item"},{default:c(()=>[d(l,{class:"dot income"}),d(g,null,{default:c(()=>[f("收入")]),_:1})]),_:1}),d(l,{class:"legend-item"},{default:c(()=>[d(l,{class:"dot expense"}),d(g,null,{default:c(()=>[f("支出")]),_:1})]),_:1})]),_:1})]),_:1}),d(l,{class:"chart-body"},{default:c(()=>[d(l,{class:"chart-y-axis"},{default:c(()=>[d(g,null,{default:c(()=>[f(_(Math.ceil(J.value)),1)]),_:1}),d(g,null,{default:c(()=>[f(_(Math.ceil(J.value/2)),1)]),_:1}),d(g,null,{default:c(()=>[f("0")]),_:1})]),_:1}),d(l,{class:"chart-main"},{default:c(()=>[d(l,{class:"chart-grid"},{default:c(()=>[d(l,{class:"grid-line"}),d(l,{class:"grid-line"}),d(l,{class:"grid-line"})]),_:1}),d(l,{class:"bar-container"},{default:c(()=>[(i(!0),p(m,null,y(H.value,(a,e)=>(i(),s(l,{class:"bar-group",key:e},{default:c(()=>[d(l,{class:"bars"},{default:c(()=>[d(l,{class:"bar income animate-grow-up",style:x({height:a.income/J.value*100+"%",animationDelay:.3+.1*e+"s"})},{default:c(()=>[a.income>.5?(i(),s(g,{key:0,class:"bar-value"},{default:c(()=>[f(_(a.income),1)]),_:2},1024)):v("",!0)]),_:2},1032,["style"]),d(l,{class:"bar expense animate-grow-up",style:x({height:a.expense/J.value*100+"%",animationDelay:.4+.1*e+"s"})},{default:c(()=>[a.expense>.5?(i(),s(g,{key:0,class:"bar-value"},{default:c(()=>[f(_(a.expense),1)]),_:2},1024)):v("",!0)]),_:2},1032,["style"])]),_:2},1024),d(g,{class:"bar-label"},{default:c(()=>[f(_(a.month),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),d(l,{class:"chart-footer"},{default:c(()=>[d(g,{class:"unit-text"},{default:c(()=>[f("单位：万元")]),_:1})]),_:1})]),_:1})]),_:1})):1===j.value?(i(),s(l,{key:2,class:"tab-content"},{default:c(()=>[(i(!0),p(m,null,y(S.value.slice(0,5),(a,e)=>(i(),s(l,{class:"record-item",key:e,onClick:e=>(a=>{C({url:`/pages/fund/income-record-detail?data=${encodeURIComponent(JSON.stringify(a))}`})})(a)},{default:c(()=>[d(l,{class:"record-left"},{default:c(()=>[d(l,{class:b(["record-type",a.type])},{default:c(()=>[f(_(a.typeText),1)]),_:2},1032,["class"]),d(l,{class:"record-info"},{default:c(()=>[d(g,{class:"record-title"},{default:c(()=>[f(_(a.title),1)]),_:2},1024),d(g,{class:"record-date"},{default:c(()=>[f(_(a.date),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(l,{class:"record-right"},{default:c(()=>[d(g,{class:b(["record-amount",a.type])},{default:c(()=>[f(_("in"===a.type?"+":"-")+_(a.amount),1)]),_:2},1032,["class"]),d(t,{name:"chevron-right",size:"32rpx",color:"#CBD5E1"})]),_:2},1024)]),_:2},1032,["onClick"]))),128)),S.value.length>5?(i(),s(l,{key:0,class:"view-more-btn",onClick:$},{default:c(()=>[d(g,null,{default:c(()=>[f("查看更多明细")]),_:1}),d(t,{name:"chevron-right",size:"32rpx"})]),_:1})):v("",!0),0===S.value.length?(i(),s(l,{key:1,class:"empty-state"},{default:c(()=>[d(t,{name:"info-circle",size:"64rpx",color:"#CBD5E1"}),d(g,null,{default:c(()=>[f("暂无收支记录")]),_:1})]),_:1})):v("",!0)]),_:1})):2===j.value?(i(),s(l,{key:3,class:"tab-content"},{default:c(()=>[(i(!0),p(m,null,y(Y.value,(a,e)=>(i(),s(l,{class:"contract-card",key:e},{default:c(()=>[d(l,{class:"contract-header"},{default:c(()=>[d(t,{name:"file-base",size:"40rpx",color:"#3B82F6"}),d(g,{class:"contract-title"},{default:c(()=>[f(_(a.title),1)]),_:2},1024)]),_:2},1024),d(l,{class:"contract-body"},{default:c(()=>[d(l,{class:"contract-row"},{default:c(()=>[d(g,{class:"c-label"},{default:c(()=>[f("签署单位：")]),_:1}),d(g,{class:"c-value"},{default:c(()=>[f(_(a.company),1)]),_:2},1024)]),_:2},1024),d(l,{class:"contract-row"},{default:c(()=>[d(g,{class:"c-label"},{default:c(()=>[f("有效期限：")]),_:1}),d(g,{class:"c-value"},{default:c(()=>[f(_(a.period),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(l,{class:"contract-footer"},{default:c(()=>[d(g,{class:"view-btn"},{default:c(()=>[f("查看电子合同")]),_:1})]),_:1})]),_:2},1024))),128)),0===Y.value.length?(i(),s(l,{key:0,class:"empty-state"},{default:c(()=>[d(t,{name:"info-circle",size:"64rpx",color:"#CBD5E1"}),d(g,null,{default:c(()=>[f("暂无合同信息")]),_:1})]),_:1})):v("",!0)]),_:1})):v("",!0)]),_:1}),d(w),d(T,{activePath:"pages/index/index"})]),_:1})}}}),[["__scopeId","data-v-fc7a7ca1"]]);export{j as default};
